<script>
    // Ensure the page is reloaded into about:blank
    if (window.location.href !== "about:blank") {
        window.location.replace("about:blank");
    } else {
        // Set the content after reloading into about:blank
        window.location.replace(window.location.href); // Reload the page with the original URL

        // Refresh logic if needed:
        setTimeout(function() {
            location.reload();  // Refresh page after loading
        }, 1000);
    }

    // Get stored passcode from localStorage
    let currentPasscode = localStorage.getItem('passcode') || 'rsar';

    const passcodeModal = document.getElementById("passcodeModal");
    const passcodeInput = document.getElementById("passcodeInput");
    const passcodeButton = document.getElementById("passcodeButton");
    const content = document.getElementById("content");

    // Show content if passcode matches
    passcodeButton.addEventListener("click", function() {
        const enteredPasscode = passcodeInput.value;
        if (enteredPasscode === currentPasscode) {
            passcodeModal.style.display = "none";
            content.style.display = "block";
        } else {
            alert("Incorrect passcode!");
        }
    });

    // Show the change passcode form
    const changePasscodeBtn = document.getElementById("changePasscodeBtn");
    const changePasscodeForm = document.getElementById("changePasscodeForm");
    changePasscodeBtn.addEventListener("click", function() {
        changePasscodeForm.style.display = "block";
    });

    // Handle passcode change
    const changePasscodeButton = document.getElementById("changePasscodeButton");
    changePasscodeButton.addEventListener("click", function() {
        const oldPasscode = document.getElementById("currentPasscodeInput").value;
        const newPasscode = document.getElementById("newPasscodeInput").value;
        const message = document.getElementById("changePasscodeMessage");

        if (oldPasscode === currentPasscode) {
            currentPasscode = newPasscode;
            localStorage.setItem('passcode', currentPasscode);
            message.textContent = "Passcode changed successfully!";
            setTimeout(() => location.reload(), 1000); // Refresh the page after change
        } else {
            message.textContent = "Incorrect old passcode!";
        }
    });

    // Matrix effect
    const canvas = document.getElementById("matrixCanvas");
    const ctx = canvas.getContext("2d");

    canvas.height = window.innerHeight;
    canvas.width = window.innerWidth;

    const columns = canvas.width / 20;
    const drops = [];
    for (let x = 0; x < columns; x++) {
        drops[x] = 0;
    }

    function drawMatrix() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "#00FF00";
        ctx.font = "20px monospace";

        for (let i = 0; i < drops.length; i++) {
            const text = String.fromCharCode(Math.random() * 128);
            ctx.fillText(text, i * 20, drops[i] * 20);

            if (drops[i] * 20 > canvas.height && Math.random() > 0.975) {
                drops[i] = 0;
            }

            drops[i]++;
        }
    }

    setInterval(drawMatrix, 50);
</script>
